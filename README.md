# Cube Renderer - Vulkan 3D Application

Приложение для рендеринга куба с белыми линиями на гранях в 3D пространстве с возможностью управления камерой.

## Описание

Это приложение демонстрирует:
- Рендеринг куба с белыми линиями на гранях
- Черный фон
- Управление камерой с помощью мыши и клавиатуры
- Ограничение движения камеры в пределах большего куба (5x5x5)

## Управление

- **WASD** - перемещение камеры
- **Мышь** - поворот камеры
- **Space** - подъем вверх
- **Shift** - спуск вниз

## Требования

- C++17 совместимый компилятор
- CMake 3.16+
- Vulkan SDK
- GLFW3
- GLM

## Сборка

```bash
mkdir build
cd build
cmake ..
cmake --build .
```

## Запуск

```bash
./Debug/ciVulkCube.exe
```

## Структура проекта

- `main.cpp` - точка входа в приложение
- `cube.hpp/cpp` - генерация геометрии куба
- `camera.hpp/cpp` - управление камерой
- `cube_app.hpp/cpp` - основное приложение Vulkan
- `vulkan_helpers.hpp/cpp` - вспомогательные функции Vulkan
- `shaders/` - GLSL шейдеры

## Технологии

- **Vulkan** - графический API
- **GLFW** - управление окном и вводом
- **GLM** - математическая библиотека
- **CMake** - система сборки

## Подробное описание файлов

### **main.cpp** - Точка входа
**Назначение**: Главная точка входа приложения, которая инициализирует и запускает Vulkan приложение.

**Ключевые действия**:
- **Строки 1-19**: Простая функция main, которая создает экземпляр `CubeApp` и запускает его
- **Обработка ошибок**: Перехватывает и отображает любые исключения, возникающие во время выполнения
- **Очистка ресурсов**: Обеспечивает правильную очистку при выходе из приложения

### **cube_app.hpp** - Заголовочный файл основного приложения
**Назначение**: Объявляет основной класс `CubeApp`, который управляет всем Vulkan приложением.

**Ключевые модули**:
- **Подключения (строки 1-8)**: Заголовки Vulkan, GLFW, GLM, стандартная библиотека и заголовки проекта
- **Структура UniformBufferObject (строки 10-15)**: Определяет структуру для передачи матриц трансформации в шейдеры
- **Класс CubeApp (строки 17-95)**: Основной класс приложения с членами для управления Vulkan ресурсами
- **Члены Vulkan (строки 19-45)**: Инстанс, физическое устройство, логическое устройство, очереди, поверхности, swap chain
- **Буферы и ресурсы (строки 46-65)**: Вершинные и индексные буферы для куба, сферы и каркаса сферы
- **Конвейеры (строки 66-70)**: Графический конвейер для заполненных объектов и конвейер для каркаса
- **Ресурсы глубины (строки 71-73)**: Изображение глубины, память и view для тестирования глубины
- **Методы инициализации (строки 75-85)**: Методы для создания различных компонентов Vulkan
- **Статические члены (строки 87-95)**: Статический экземпляр приложения и callback для мыши

### **cube_app.cpp** - Реализация основного приложения
**Назначение**: Реализует всю логику Vulkan приложения, включая инициализацию, рендеринг и очистку.

**Ключевые модули**:
- **Конструктор (строки 1-25)**: Инициализирует GLFW, создает окно, настраивает callback для мыши, генерирует геометрию
- **mainLoop() (строки 27-40)**: Основной цикл рендеринга с обработкой событий и обновлением камеры
- **cleanup() (строки 42-85)**: Освобождает все Vulkan ресурсы в правильном порядке
- **initVulkan() (строки 87-105)**: Инициализирует все компоненты Vulkan в правильной последовательности
- **createInstance() (строки 107-130)**: Создает экземпляр Vulkan с поддержкой валидации
- **setupDebugMessenger() (строки 132-140)**: Настраивает отладочные сообщения (если включены)
- **pickPhysicalDevice() (строки 142-155)**: Выбирает подходящее физическое устройство
- **createLogicalDevice() (строки 157-185)**: Создает логическое устройство с очередями
- **createSurface() (строки 187-195)**: Создает поверхность для рендеринга
- **createSwapChain() (строки 197-250)**: Создает swap chain для отображения кадров
- **createImageViews() (строки 252-270)**: Создает views для изображений swap chain
- **createRenderPass() (строки 272-320)**: Создает render pass с привязками цвета и глубины
- **createDescriptorSetLayout() (строки 322-340)**: Создает layout для descriptor sets
- **createGraphicsPipeline() (строки 342-420)**: Создает графический конвейер для заполненных объектов
- **createWireframePipeline() (строки 422-500)**: Создает конвейер для каркаса с линиями
- **createFramebuffers() (строки 502-530)**: Создает framebuffers с привязками цвета и глубины
- **createCommandPool() (строки 532-545)**: Создает пул команд для записи команд рендеринга
- **createDepthResources() (строки 547-570)**: Создает ресурсы для тестирования глубины
- **createTextureImage() (строки 572-580)**: Заглушка для создания текстур (не используется)
- **createVertexBuffer() (строки 582-620)**: Создает вершинные буферы для всех объектов
- **createIndexBuffer() (строки 622-660)**: Создает индексные буферы для всех объектов
- **createUniformBuffers() (строки 662-680)**: Создает uniform буферы для передачи данных в шейдеры
- **createDescriptorPool() (строки 682-700)**: Создает пул дескрипторов
- **createDescriptorSets() (строки 702-720)**: Создает descriptor sets для uniform буферов
- **createCommandBuffers() (строки 722-780)**: Записывает команды рендеринга в command buffers
- **createSyncObjects() (строки 782-800)**: Создает семафоры и fence для синхронизации
- **drawFrame() (строки 802-850)**: Основная функция рендеринга кадра
- **updateUniformBuffer() (строки 852-870)**: Обновляет uniform буфер с матрицами камеры
- **mouseCallback() (строки 872-880)**: Callback для обработки движения мыши
- **Вспомогательные функции (строки 882-950)**: Функции для работы с изображениями и форматами

### **cube.hpp/cpp** - Геометрия куба
**Назначение**: Определяет структуру Vertex и генерирует геометрию куба.

**Ключевые модули**:
- **Структура Vertex (cube.hpp)**: Определяет вершину с позицией и методами для Vulkan
- **generateCubeMesh() (cube.cpp)**: Генерирует вершины и индексы для каркаса куба

### **camera.hpp/cpp** - Управление камерой
**Назначение**: Реализует свободную камеру с управлением WASD и мышью.

**Ключевые модули**:
- **Класс Camera (camera.hpp)**: Объявляет методы для управления камерой
- **Конструктор и инициализация (camera.cpp)**: Инициализирует камеру с начальными параметрами
- **processInput()**: Обрабатывает ввод с клавиатуры (WASD, Space, Shift)
- **processMouse()**: Обрабатывает движение мыши для поворота камеры
- **update()**: Обновляет позицию камеры с ограничением в пределах куба 5x5x5
- **getViewMatrix()**: Возвращает матрицу вида камеры
- **getProjectionMatrix()**: Возвращает матрицу проекции

### **vulkan_helpers.hpp/cpp** - Вспомогательные функции Vulkan
**Назначение**: Содержит вспомогательные структуры и функции для работы с Vulkan.

**Ключевые модули**:
- **Структуры (vulkan_helpers.hpp)**: QueueFamilyIndices, SwapChainSupportDetails
- **findQueueFamilies()**: Находит подходящие семейства очередей
- **querySwapChainSupport()**: Проверяет поддержку swap chain
- **readFile()**: Читает файлы (используется для шейдеров)
- **createBuffer()**: Создает буферы в Vulkan
- **copyBuffer()**: Копирует данные между буферами
- **findMemoryType()**: Находит подходящий тип памяти

### **sphere.hpp/cpp** - Геометрия сферы
**Назначение**: Генерирует геометрию сферы для заполненного объекта и каркаса.

**Ключевые модули**:
- **generateSphereMesh()**: Генерирует треугольники для заполненной сферы
- **generateSphereWireframe()**: Генерирует линии для каркаса сферы

### **shaders/** - GLSL шейдеры
**Назначение**: Содержит шейдеры для рендеринга объектов.

**Ключевые файлы**:
- **vertex.glsl**: Вершинный шейдер для всех объектов
- **fragment.glsl**: Фрагментный шейдер для заполненных объектов (черный цвет)
- **fragment_lines.glsl**: Фрагментный шейдер для линий каркаса (белый цвет)

### **CMakeLists.txt** - Конфигурация сборки
**Назначение**: Настраивает сборку проекта с CMake.

**Ключевые модули**:
- **Настройка проекта**: Версия CMake, название проекта, стандарт C++
- **Поиск зависимостей**: Vulkan, GLFW, GLM
- **Компиляция шейдеров**: Автоматическая компиляция GLSL в SPIR-V
- **Создание исполняемого файла**: Линковка всех исходных файлов и библиотек

### **.gitignore** - Исключения Git
**Назначение**: Определяет файлы и папки, которые не должны отслеживаться Git.

**Ключевые исключения**:
- Папки сборки (build/, Debug/, Release/)
- Скомпилированные файлы (.obj, .exe, .dll)
- Файлы шейдеров (.spv)
- Файлы IDE и временные файлы 